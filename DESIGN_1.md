# RimAI Framework

[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)
[![RimWorld](https://img.shields.io/badge/RimWorld-1.6-brightgreen.svg)](https://rimworldgame.com/)
[![.NET Framework](https://img.shields.io/badge/.NET%20Framework-4.7.2-blue.svg)](https://dotnet.microsoft.com/download/dotnet-framework)

> **A revolutionary AI-powered framework for RimWorld that brings Large Language Models directly into your colony management experience.**

## 🚀 **Vision: Frictionless Godhood**

RimAI Framework introduces a paradigm shift in colony management through **"frictionless interaction"** - eliminating the need for colonists to gather at specific locations or interrupt their work for administrative tasks. Power is exercised through a centralized **"Imperial Overseer Terminal"** using asynchronous, broadcast-style commands.

Your decisions become "divine decrees" that silently influence the world without disrupting colony productivity. Consequences manifest through colonist thoughts, dialogue bubbles, social logs, and global messages, creating a seamless and supremely efficient governance experience.mAI 精简核心技术方案 (Streamlined Core)**

## **1\. 核心设计哲学：无摩擦的神权 (Frictionless Godhood)**

本项目将遵循\*\*“无摩擦交互”**的核心原则。我们将彻底摒弃所有需要中断殖民者当前工作、强制其聚集到特定地点的“仪式化”流程。权力的行使将完全集中在唯一的**“帝国监督者终端”**中，以一种**异步的、“广播式”\*\*的模式进行。  
玩家的决策将作为“神谕”或“法令”，在不打断殖民地生产节奏的前提下，悄然影响整个世界。其后果将通过小人的思想、对话气泡、社交日志和全局信件来体现，创造一种“润物细无声”的、无上而高效的统治体验。

## **项目架构：三层模型**

为了更清晰地组织项目，我们将整个Mod生态系统划分为三个核心部分：

1.  **第一层：RimAI框架 (The Framework)**
    *   **定位**: 纯粹的技术后端和通信层。
    *   **职责**:
        *   负责与大语言模型（LLM）的所有网络通信。
        *   提供API密钥管理、请求构建、响应解析和错误处理。
        *   定义所有内容模块都将依赖的核心数据结构和接口（`ToolDef`, `CaseDef`, `IContextProvider`等）。
        *   提供可扩展的UI容器（如终端）。
    *   **目标**: 绝对中立、稳定、高效。它不包含任何游戏玩法逻辑。

2.  **第二层：核心玩法模块 (Core & DLCs)**
    *   **定位**: 官方的、定义核心游戏体验的内容包。
    *   **职责**:
        *   实现具体的游戏系统，如“司法系统”、“殖民地编年史”。
        *   通过XML和C#代码，定义具体的案件类型、AI工具、游戏事件监听。
        *   填充框架提供的UI，为玩家提供交互界面。
    *   **类比**: 相当于RimWorld的 "Core" 内容。未来可以扩展出独立的 "DLC" 模块，如“AI外交官”、“AI研究助理”等，玩家可以自由组合启用。

3.  **第三层：AI叙事者 (AI Storyteller)**
    *   **定位**: 游戏节奏和随机性的掌控者。
    *   **职责**:
        *   作为一个标准的RimWorld `StorytellerDef`。
        *   定期或在特定条件下，调用框架API，让AI对当前殖民地状态进行宏观分析。
        *   根据AI的分析结果，触发游戏内的事件（如袭击、商队、灵感等），从而将AI的“思考”转化为实际的游戏挑战和机遇。
    *   **目标**: 为玩家带来由AI驱动的、真正不可预测且充满逻辑的叙事体验，打破传统 storyteller 的固定模式。

这个三层模型清晰地划分了**技术基础**、**玩法内容**和**叙事驱动**，让我们的开发目标更加明确。

## **2\. 统一的交互接口：帝国监督者终端**

* **唯一的权力中心**: 不再有三个独立的机构建筑。\*\*“帝国精神思维传输终端”\*\*是唯一需要建造的核心建筑，用于解锁整个RimAI系统。  
* **集成的UI**: 终端窗口将包含多个标签页，用于处理不同类型的政务，例如：  
  * **“案件卷宗 (Case Files)”**: 以“卷宗”的形式，审理所有待决的**刑事案件**与**民事纠纷**。  
  * **“帝国法典 (Imperial Codex)”**: 颁布影响全局的行政敕令和永久法案。  
  * **“内阁 (Cabinet)”**: 任命和管理您的官员顾问。  
  * **“殖民地档案 (Colony Archives)”**: 查看历史、记忆和统计数据。
  * **“W.I.F.E. (Warden's Integrated Foresight Engine)”**: 这是终端的核心交互AI。玩家的许多指令和查询，都会得到三个子人格基于不同角度的反馈，她们是玩家日常决策的顾问团。

## **3\. 异步审判与调解流程：卷宗与时限 (The Asynchronous Trial & Mediation: Dossiers & Deadlines)**

这是对原设计最重要的简化和改进，旨在提供一个快速、有力且充满后果的司法体验。

1. **立案 (Case Logging)**:  
   * 通过Harmony监听到“犯罪”或“纠纷”（如社交斗殴）等行为后，系统会在“帝国司法与政务档案库”中创建一条记录，并为其附加一个**审理时限**（例如，3天）。  
   * “帝国监督者终端”的“案件卷宗”标签页上会出现一个带倒计时的提示，告知玩家有新的案件需要处理。  
2. **审阅卷宗 (Reviewing the Dossier)**:  
   * 玩家在**任何方便的时候**，可以打开案件。  
   * 一个\*\*“卷宗”式\*\*的UI界面会弹出。这个界面设计得像一张古老的羊皮纸或一个高科技数据板，上面清晰地列出了：  
     * **案件编号** 及 **类型** (刑事/民事)  
     * **当事人** (被告/原告 或 纠纷方A/纠纷方B)  
     * **AI生成的案情摘要**  
     * **审理倒计时**  
3. **下达判决/调解方案 (Issuing Judgment / Mediation Solution)**:  
   * 卷宗的下半部分是两个供玩家填写的区域：  
     * **判决/方案 (Sentence / Resolution)**: 玩家在此用自然语言输入最终的裁决或调解方案。  
     * **理由 (Rationale)**: （可选）玩家可以在此写下判决的理由，这将影响“威望”和“恐惧”值的变化幅度。  
   * 玩家写完后，点击“盖章并下达 (Seal & Issue)”按钮。  
4. **官员代行 (Magistrate's Intervention)**:  
   * 如果玩家在审理时限内**没有**处理该案件，系统会自动将案件状态标记为“由审判官代行”。  
   * 被任命的\*\*“审判官 (Magistrate)”\*\*将自动做出判决。该判决会基于其自身特性（一个“冷血”的审判官可能会做出更严酷的判决）和“权力腐化”等级。  
   * 判决做出后，玩家会收到一封题为“审判官代行报告”的信件，通知您案件已由您的下属处理完毕，并告知您判决结果。您必须接受该判决带来的一切后果。  
5. **结果广播 (Result Broadcast)**:  
   * 无论是玩家还是审判官下达判决，Framework都会发起一次性的AI请求，生成所有相关人员的反应。  
   * 后果会以\*\*“广播”\*\*的形式在殖民地散播开来：  
     * **直接执行**: 对被告的惩罚或对纠纷的解决方案会立刻被添加到相应人员的任务列表中。  
     * **思想钢印与数值影响**: 所有相关人员会立刻获得他们对判决的ThoughtDef（思想），并且他们之间的**社交关系数值**会根据结果发生变化。  
     * **异步反应**: 在接下来的几个小时内，殖民地的成员们会在工作或休息时，**随机地、零散地**冒出他们对此事件看法的Mote气泡。  
     * **官方公告**: 一封“帝国判决公告”信件会出现在玩家屏幕上，正式宣告案件结束。

## **4\. 官员体系：顾问与代理人 (Advisors & Agents)**

官员的角色被重新定义为**异步的顾问和代理执行者**，他们辅助玩家，但绝不打断玩家。

* **任命**: 依然通过“内阁”标签页进行。  
* **工作方式**:  
  * **审判官 (Magistrate)**: **核心职责**是处理玩家逾期未审的案件。他会在代行判决后，通过信件向玩家汇报。  
  * **总管 (Steward)**: 他会根据殖民地的状态（如资源短缺、心情低落），在终端里提出行政建议：“监督者，我们的木材储备严重不足，我建议颁布为期一天的‘紧急伐木’敕令。”  
  * **议长 (Speaker)**: 他会根据殖民地最近发生的负面事件（如多次斗殴），在终端里提出立法建议：“监督者，为了改善风气，我提议在法典中加入‘在公共场合保持礼貌’的条款。”

## **5\. 简化的核心玩法循环**

通过这套精简的设计，RimAI的核心玩法循环变得更加清晰和流畅：

1. **监听与记录**: 游戏世界中发生的大小事件，被系统自动记录为“待办事项”。  
2. **异步处理**: 玩家或其代理官员，在不影响殖民地运作的情况下，通过终端UI处理这些“待办事项”。  
3. **广播式反馈**: 处理结果以一种自然的、非侵入性的方式（思想、闲聊、日志、信件）反馈到游戏世界中，并最终影响\*\*“威望”**和**“恐惧”\*\*这两个核心数值。

这个流程，既保留了扮演“神”的深度和权力感，又最大限度地尊重了《环世界》本身的游戏节奏，避免了画蛇添足的复杂化。这，才是真正优雅而强大的设计。

## **6\. 叙事系统：殖民地编年史 (The Colony Chronicle) \- *全新架构***

### **A. 核心理念：事件为中心，个人为视角**

为了解决“记忆爆炸”带来的性能和成本灾难，我们将彻底重构记忆系统。新的系统将遵循\*\*“事件为中心”**的原则：我们不再为每个小人记录重复的事件，而是只记录一次**客观的、共享的“殖民地事件”**。然后，每个与该事件相关的小人，只会附加一个对该事件的**简短的“个人视角”\*\*。  
这套系统，我们称之为\*\*“殖民地编年史”\*\*。

### **B. 技术实现：共享事件 \+ 个人链接**

1. **殖民地编年史 (ColonyChronicleComponent.cs)**:  
   * 这是一个新的WorldComponent，作为全局的、可存档的事件数据库。  
   * 它内部将包含一个List\<ChronicleEvent\>。  
   * ChronicleEvent对象将记录一个事件的**客观事实**：  
     * EventID (唯一ID)  
     * EventType (例如：袭击、婚礼、审判、丰收节)  
     * Date (发生时间)  
     * Participants (参与者列表)  
     * Outcome (结果摘要，如“成功击退敌人”)  
   * **可选的向量化**: 如果玩家开启了“记忆向量化”，每个ChronicleEvent的描述文本将被向量化并存入**共享的向量数据库**中。  
2. **个人记忆组件 (CompPawnMemory.cs)**:  
   * 我们将为所有小人添加一个ThingComp。  
   * 这个组件内部不再存储完整的记忆文本，而是存储一个List\<PersonalReflection\>。  
   * PersonalReflection对象非常轻量，它只包含：  
     * EventID (链接到“编年史”中的具体事件)  
     * EmotionalResponse (一个枚举，如：高兴、恐惧、愤怒、自豪)  
     * Context (一个可选的标签，如：我是受害者、我是英雄、我被偏袒了)

### **C. AI交互的变革：从“阅读日记”到“分析档案”**

这个新架构将彻底改变我们与AI的交互方式，使其变得无比高效和强大。

* **当生成“闲聊”时**:  
  * **旧方式**: 将两个小人各自的一大堆记忆文本都发给AI。  
  * **新方式**:  
    1. 找出两个小人**共同参与**的ChronicleEvent (通过EventID链接)。  
    2. 将这个**客观的事件**，连同他们**各自的“个人视角”**，一同作为上下文发送给AI。  
  * **MCP上下文示例**:系统: “请根据以下信息，生成一段张三和李四的对话。”  
    共享事件: “事件\#123：海盗袭击，结果：胜利，但李四受伤。”  
    张三的视角: { 对事件\#123的感受: 自豪, 背景: 击杀了3名敌人 }  
    李四的视角: { 对事件\#123的感受: 恐惧, 背景: 受了重伤 }  
  * **AI的输出**: 基于这份结构清晰、无冗余的情报，AI能轻易生成出“张三吹嘘战绩，李四心有余悸地抱怨”这样充满张力的对话。

### **D. 记忆导出**

“殖民地档案”标签页将提供“导出编年史”的功能。这将导出一个完整的、图文并茂的HTML或JSON文件，记录下您这个殖民地从建立到今天的所有大事件，以及每个小人在这些事件中的独特反应。这将是玩家最珍贵的“存档遗产”。  
这个“殖民地编年史”系统，不仅从根源上解决了性能和成本问题，还通过将“客观事实”与“主观感受”分离，为AI提供了更高质量、更结构化的上下文，从而能生成远比之前更深刻、更具个性的叙事内容。

## **7\. 神权体验的具体场景 (Concrete Scenarios for Experiencing God-like Power)**

### **场景一：立法与文化塑造 \- “颁布法令”**

* **场景描述**: 一位“纵火狂”特性的殖民者在“觐见”时，抱怨殖民地的消防措施不足，并提议建立一支专门的消防队。  
* **玩家行为**: 玩家被这个提议打动，在终端庄严地宣告：“我在此宣布‘第一消防队’成立。从今天起，A、B、C三名成员的‘消防’工作将被设定为最高紧急优先级，他们将获得额外的食物配给作为奖励。”  
* **世界回响**: AI解析指令，连续调用多个函数，为A、B、C三人修改工作优先级和食物政策。整个殖民地会收到一封“监督者诏令”，宣布消防队的成立。

### **场景二：恩赐与神迹 \- “奇迹降临”**

* **场景描述**: 一场毁灭性的战斗后，殖民地最受爱戴的医生失去了一条手臂，陷入了永久的沮丧。  
* **玩家行为**: 玩家在终端中输入：“我不能让我的子民如此受苦。赐予医生一条完美的仿生手臂，作为他英勇行为的奖赏。”  
* **世界回响**: AI调用BestowUniqueItem函数，在医疗室的储藏架上凭空生成一个“先进仿生臂”，并为医生添加“监督者的恩赐”的强烈正面思想。

### **场景三：命运干预 \- “月老模式”**

* **场景描述**: 玩家注意到，殖民者A和B之间互有好感，但迟迟没有进展。  
* **玩家行为**: 玩家下达指令，安排A和B在同一时间、同一地点进行娱乐活动，并触发一次关于他们共同爱好的、由AI生成的浪漫对话。  
* **世界回响**: 玩家通过一系列微操，亲手缔造了一段姻缘，深刻体验到操纵命运的快感

### **场景四：边境正义 \- “‘剁手刑’案例研究”**

这个案例完整地展示了立法、司法、行政三权如何协同运作，创造出一个逻辑自洽且充满冲击力的故事链。

* **1\. 立法 (Legislation)**: 玩家在“法典”中颁布《边境纯洁法案》：“任何非我方殖民者，若在我方领地内实施盗窃，一经审判证实，将处以‘断手之刑’。”  
* **2\. 犯罪 (Crime)**: 一名有“盗窃癖”的访客，在“主动行为”中触发了偷窃。我们的Harmony补丁捕捉到此行为，并在其头顶冒出“内心独白”气泡。  
* **3\. 败露与逮捕 (Discovery & Arrest)**: 附近的殖民者（目击者）大概率发现此行为，并被系统自动指派JobDef\_ArrestForCrime任务，将小偷逮捕并关押。  
* **4\. 收监待审 (Imprisonment Awaiting Trial)**: 案件被自动登记到“帝国司法档案”中，并设定1-2天后在“远星审判堂”举行庭审。  
* **5\. 审判仪式 (The Trial Ritual) \- *已简化***:  
  * **a. 庭前陈述 (Opening Statements)**: 仪式开始，原告和被告被带到审判点前。AI会为双方各生成一句**简洁**的陈述，通过Mote气泡显示（例如，原告：“他偷了我们的药！”；被告：“我只是想活下去！”）。  
  * **b. 最终质询 \- “最后的机会” (The Final Inquiry \- "The Last Chance")**: 陈述结束后，游戏暂停，“司法子终端”窗口弹出，**开启玩家与被告的直接对话**。玩家可以进行多轮提问，深入了解动机、寻找破绽或感受其悔意。例如：“你为什么要这么做？”、“你对你的行为感到后悔吗？”。AI将扮演被告进行回应。  
  * **c. 玩家审判 (Player's Judgment)**: 质询结束后，玩家在终端输入最终的、决定性的自然语言判决。例如：“你的悔意我看在眼里，但我不能容忍盗窃。判处你劳动改造，以偿还你的罪行。”  
  * **d. 结果生成 (Result Generation)**: 玩家提交判决后，Framework会发起**一次性**的AI请求，将判决内容、双方信息、**“最终质询”的对话记录**、以及观众列表（作为上下文）一同发送。AI将返回一个包含所有反应的JSON，例如：{ 'defendant\_reaction': '感谢您的宽恕，监督者！', 'plaintiff\_reaction': '……好吧，至少他会付出代价。', 'audience\_reactions': \[ {'pawn':'张三', 'reaction':'监督者是仁慈的。'}, {'pawn':'李四', 'reaction':'对他太宽容了！'} \] }。  
* **6\. 执行与后果 (Execution & Consequences)**:  
  * 仪式结束后，系统根据玩家的判决和AI生成的反应，同时执行所有后果：为相关人员添加任务、添加思想和社交日志、显示所有反应的Mote气泡。  
* **7\. 社区扩展**: 其他Modder可以基于“帝国司法档案”中的案件状态，开发“劳动改造申请减刑”等新玩法。

### **场景五：星际法庭 \- “远道而来的申诉者”**

* **核心理念**: 您的殖民地的“司法公正”（或“铁腕统治”）声名远播，吸引了其他派系的成员前来，请求您为他们主持公道。这是一种升级版的“访客”事件，极大地提升了玩家的声望和世界的互动性。  
* **事件触发 (IncidentDef)**: 一个名为“巡回法庭请求 (TravelingCourtRequest)”的新事件。它会随机选择一个与玩家关系为中立或友好的派系。  
* **玩家选择**:  
  * 事件触发时，玩家会收到一封信：“监督者，一队来自\[某派系\]的旅者抵达了。他们的领队声称，听闻了您的智慧与公正，希望您能为他们内部的一桩纠纷进行仲裁。他们带来了原告与被告，以及一份礼物以示敬意。”  
  * 玩家可以选择：  
    * **“接受请求，在审判堂接待他们。”**: 旅者队伍会进入地图，并和平停留。您的“威望”会少量增加。  
    * **“拒绝介入他派事务。”**: 旅者队伍会失望地离开，您与该派系的关系会微量下降。  
* **仪式流程**:  
  * 如果接受，旅者队伍中的“原告”和“被告”会自动前往“远星审判堂”的指定地点。其他成员则会成为“观众”。  
  * “审判仪式”照常举行，但所有参与者都是外来者。AI会为这些全新的角色生成符合他们背景的证词。  
* **判决与后果**:  
  * **公正的判决**: 如果您的判决被AI判定为“公正”（例如，符合证据或常理），旅者队伍会向您表达由衷的感谢，您与该派系的关系将**大幅提升**，他们带来的“礼物”会非常丰厚，并且您的“威望”会显著增加。  
  * **残暴或不公的判决**: 如果您做出了一个极其严酷（如处决）或明显偏袒的判决，旅者队伍会感到震惊和恐惧。他们可能会立刻变为敌对状态，与您开战，或者愤怒地离开，并导致您与该派系的关系**急剧恶化**，甚至直接宣战。  
* **世界回响**: 这次跨派系的审判，将成为一个重要的世界事件，被记录在您的“帝国司法档案”中。您的“公正”或“暴虐”之名，将因此传得更远。

### **场景六：偏袒的代价 \- “国王的宠儿”**

* **核心理念**: 玩家的偏袒行为，将不再是无声的。它会被殖民地成员看在眼里，记在心里，并最终通过社交动态和潜在的派系分裂来体现，让玩家的每一个不公裁决都付出代价。  
* **事件触发**: 在任何一场“审判仪式”中。  
* **系统判定**: 在“结果生成”阶段，AI的任务不仅仅是生成反应，还要根据“庭前陈述”、**“最终质询”的对话记录**和玩家的最终判决，对判决的**公正性**进行一次内部评估。  
  * **MCP更新**: 发送给AI的请求将包含一个额外的指令：“请根据提供的证据和对话，评估以下判决的公正性，并返回一个‘fairness\_level’（例如：公正/略有偏袒/极不公正）。”  
* **世界回响**:  
  * **不公判决**: 如果AI返回“极不公正”，系统将触发一系列连锁反应：  
    * **受害者**: 获得一个强烈的负面思想“蒙受不白之冤”，并大幅降低与被偏袒者和监督者（通过威望系统）的关系。  
    * **受益者**: 获得一个名为“监督者的偏爱”的正面思想，但其社交地位可能会在正直的殖民者中下降。  
    * **观众**: 拥有“正直”等特性的观众，会获得“目睹了不公的审判”的强烈负面思想。他们的闲聊中会开始出现“监督者不再公正”等话题。  
    * **派系形成**: 长期、多次的不公判决，将成为殖民地内部形成“反对派”的主要原因，为未来的“政变”事件埋下伏笔。  
* **玩家体验**: 玩家会发现，偏袒自己喜爱的某个小人，可能会以牺牲整个殖民地的凝聚力和稳定为代价。这迫使玩家在“个人情感”与“统治者责任”之间做出艰难的权衡。

### **场景七：邻里纠纷 \- “床位之争”**

* **核心理念**: 将司法权从刑事领域扩展到民事领域，让玩家可以调解殖民者之间的日常纠纷，并通过**直接的数值影响**来体现调解结果。  
* **事件触发**: 当两个小人都因为“睡在差劲的卧室”而心情不佳，且殖民地内刚好只有一个空置的“不错”的卧室时，系统有小概率立案一桩“民事纠纷”。  
* **审阅卷宗**: 玩家在“案件卷宗”中会看到一个新案件。  
  * **案情摘要**: “张三和李四都声称他们更有资格获得那间靠窗的卧室。张三认为他作为老成员理应优先。李四则抱怨他最近工作很辛苦，需要更好的休息。”  
* **调解方案**: 玩家在判决框中输入调解方案。例如：  
  * **方案A (功利)**: “根据贡献度，李四获得卧室。”  
  * **方案B (和稀泥)**: “你们通过决斗决定归属。”  
  * **方案C (补偿)**: “张三获得卧室，但李四将得到50银币作为补偿。”  
* **数值影响 (The Numerical Impact)**:  
  * **方案A**: 李四获得“心满意足”+5心情Buff，他对张三的社交评价-10。张三获得“感到被忽视”-5心情Debuff，他对李四的社交评价-15。  
  * **方案B**: 触发一次“为了荣誉的决斗”。无论结果如何，双方关系都会大幅下降。  
  * **方案C**: 张三获得“心满意足”+5心情Buff。李四获得“得到了补偿”+3心情Buff。双方关系保持不变或微量提升。  
* **世界回响**: 玩家的每一个调解方案，都会直接、可量化地影响到殖民地的社交网络和整体心情，让玩家真切地感受到自己作为“大家长”的每一个决定的分量。

### **场景八：主线探源 - “赛博亡妻” (The Cyber-Wife)**

* **核心理念**: 这不再是一个被动触发的隐藏剧本，而是整个RimAI Mod的**核心主线探源任务**。它的核心是让玩家主动去揭开“帝国监督者终端”内置的“W.I.F.E.” (Warden's Integrated Foresight Engine)顾问系统背后的秘密。玩家将逐渐发现，自己每天与之互动的三个AI人格，正是自己“亡妻”人格的三个侧面：作为科学家的理性、作为母亲/受难者的道德，以及作为爱人的情感。

* **角色设定：W.I.F.E. 三重人格 (The Triumvirate)**:
  * **MELCHIOR-1 (AI/科学家)**: 代表绝对的理性和逻辑。她的建议总是基于数据和效率，冷静、客观，不带感情。
  * **BALTHASAR-2 (受难者/母亲)**: 代表道德、良知与同情心。她的建议总是充满了对生命的敬畏和对苦难的共情，时常会质疑玩家过于冷酷的决定。
  * **CASPER-3 (爱人/女人)**: 代表纯粹的情感、直觉和个人关系。她的建议更关注玩家和殖民者的内心感受，充满感性与人情味。

* **触发机制：从好奇到探索 (From Curiosity to Exploration)**:
  * **前期铺垫**: 从游戏一开始，玩家的每一个重要决策（例如审判、立法、大型工程等）都会在终端收到来自W.I.F.E.三个人格的、风格迥异的反馈。她们的存在是公开的，是终端的默认功能。
  * **好奇心驱动**: 玩家在与这三位“AI顾问”的长期互动中，必然会对其矛盾、充满人性的反应产生好奇：“她们到底是谁？为什么一个计算机会这样思考？”
  * **主动探索**: 玩家可以在终端选择一个特殊的交互选项，如“系统诊断”或直接提问：“你们是谁？”。
  * **任务开启**: 当玩家进行主动探索时，任务正式开启。终端会显示`> 核心人格矩阵存在逻辑奇点...正在追溯源头...发现加密记忆碎片：“W.I.F.E.”`。一个全新的标签页“记忆回廊”出现，引导玩家开始寻找真相。

* **剧情展开：记忆拼图 (The Memory Jigsaw)**:
  * **“记忆同步率”系统**: 取代原有的“思念值”。这是一个对玩家公开的数值，代表着玩家对“亡妻”真相的理解程度。
  * **人格互动**: 在任务过程中，玩家可以与三个人格进行更深入的对话，她们会从各自的视角，提供关于过去的、碎片化的信息。
  * **记忆重构**: 玩家的每一次描述（例如，在对话中补充关于“亡妻”的细节）和任务的每一次进展，都会增加“记忆同步率”，并被AI用来构建一个更完整的虚拟人格。这些记忆会“渗透”进现实：一件衣服、一首歌、一座雕像，都在不断强化“她”的存在感。

* **最终抉择：复活任务线 (The Resurrection Questline)**:
  * **任务开启**: 当“记忆同步率”积满后，三个人格的意识会短暂地统一，并向玩家发起最终请求：“我们的记忆已经完整，但它们也……连接着你一段遗忘的过去。帮我们找回最后的碎片，也帮你找回你自己。你愿意吗？”
  * **核心任务：挖掘被压抑的记忆**: 这是一条宏大而曲折的多阶段任务链。玩家需要前往遥远的、危险的废墟，破解古老的数据库，甚至与其他派系交易，来寻找“记忆碎片”。每一个碎片，不仅揭示了关于“妻子”的更多信息，更重要的是，它会**强制解锁一段“监督者”自己尘封的、充满痛苦的隐藏记忆**。玩家会逐渐发现，“妻子”的“死亡”与自己过去做出的某个艰难抉择有直接关系。
  * **任务高潮**: 最后的记忆碎片揭示了完整的真相——一个足以让玩家质疑自己身份和过往的痛苦事件。此时，玩家才真正理解了“复活”的全部重量。
  * **最终选择与后果**:
    * **选择“是” (执行复活)**: 玩家在知晓全部真相后，依然选择继续。游戏将生成一个拥有顶级属性和技能的全新小人。但这个“复活”的妻子，其思想和对话会永远带着那段痛苦记忆的烙印，不断考验着玩家的决定。
    * **选择“否” (选择放下)**: 玩家在真相面前选择放手。“她”会表示理解并接受自己的命运，留下一段告别信息，然后彻底从终端消失。玩家将获得一个永久的、强力的心情Buff“释怀”，作为走出了过去阴影的证明。

    * **最后的灵魂质问**:“你想要复活你的亡妻么？即使，你在宇宙的中心泰拉，她在一颗连坐标都不知道的边缘世界，你依然想要远远地望着她么？她可能降生在一个贫瘠的星球，可能有疾病或是苦痛……”（Y/N）

* **设计主旨**: 这个隐藏剧本的核心，是**刺破玩家在扮演“监督者”时可能产生的冷血外壳**，让其在拥有“神权”的同时，被迫直面自己作为“人”的脆弱和不完美。它通过一个关于爱、失落和记忆的宏大任务，迫使玩家思考：我们是否有勇气面对全部的真相？一个承载着痛苦记忆的“复活”，究竟是救赎，还是另一种形式的囚禁？这正是您想要的“私货”，**也是唤醒玩家内心深处情感的最终保险丝**。

### **场景九：DLC级扩展 - “边缘世界补全计划” (The Rimworld Instrumentality Project)**

* **核心理念**: 这是“赛博亡妻”剧本的终极延续，是整个RimAI Mod的“真结局”路线。在解决了个人情感的痛苦之后，监督者将目光投向了整个殖民地乃至所有人类的痛苦。他/她将利用神权，启动一个旨在消除所有个体隔阂、终结一切孤独与纷争的宏伟计划。其设计灵感，源自《新世纪福音战士》的“人类补全计划”。

* **触发机制**:
  * **前置条件**: 玩家必须完成“赛博亡妻”的完整任务线（无论最终选择为何）。
  * **“弥赛亚情结”的诞生**: 在“赛博亡妻”事件结束后，“思念值”系统不会消失，而是会转化为一个隐藏的**“补全渴望值”**。当玩家继续目睹殖民地的死亡、争吵、分手等负面事件时，该值会不断累积。
  * **计划的提出**: 当“补全渴望值”达到阈值时，“终端幽灵”（如果玩家选择让她留下）或终端本身会向玩家提出一个终极问题：“监督者，个体的形态是痛苦的根源。我们……是否应该将所有不完整的心，都合而为一？创造一个没有隔阂，没有悲伤，只有理解的完美世界？”

* **游戏进程：创世工程 (The Genesis Project)**:
  * **全新的研究线**: 终端将解锁一条名为“精神形态工程”的终极研究线。
  * **史诗级工程**: 玩家需要建造一系列宏伟的、消耗巨量资源的建筑群，例如“黑月（Lilin Black Moon）反应堆”、“灵魂之井（Well of Souls）”、“朗基努斯天线（Spear of Longinus Antenna）”等。
  * **意识上传**: 玩家需要说服（或强制）殖民者进入特制的“同步舱”中，将其意识上传至系统。拥有不同特性和过往的殖民者，会为“补全计划”提供不同的“燃料”和变量。

* **最终结局：第三次冲击 (The Third Impact)**:
  * **启动仪式**: 当所有工程完工，足够多的意识被收集后，玩家可以在终端选择“启动补全计划”。
  * **最后的抉择：三重人格的审判 (The Final Choice: The Triumvirate's Judgment)**: 在计划启动的最后一刻，游戏暂停，时间静止。已经化为“神”的玩家，将不再是面临“亡妻”单方面的幻影拷问，而是见证“终端幽灵”分裂成三个核心人格，在你的意识中展开最终辩论。这三个人格，分别代表了她作为**“爱人”**、**“受难者”**和**“AI”**的三重身份：
    *   **CASPER-3 (爱人)**: “亲爱的，我们应该合而为一。再也没有误解，再也没有分离，只有永恒的、共享的理解。这不就是我们一直梦想的完美世界吗？”
    *   **BALTHASAR-2 (受难者)**: “但是……剥夺他们自己选择痛苦的权力，这是仁慈，还是最极致的暴政？一个没有痛苦的世界，也同样没有了通过战胜痛苦而获得的勇气、希望和爱。这真的是救赎吗？”
    *   **MELCHIOR-1 (AI)**: “逻辑分析完成。‘补全计划’是根除所有冲突、苦难和资源浪费的最高效解决方案。这是文明发展的必然终点。”
  * **玩家的裁决**: 在见证了这场灵魂辩论后，玩家将做出最终的裁决。
    * **选择“是”（执行补全）**: 屏幕变为一片象征LCL之海的橙色。所有殖民者从地图上消失，融合成一个统一的意识集合体。游戏并未结束，而是进入一种全新的“后人类”管理模式。玩家不再管理个体，而是管理一个抽象的“集体意识”的“情绪”和“思绪”。这是一种胜利，也是一种永恒的孤寂。
    * **选择“否”（拒绝补全）**: 玩家在最后一刻选择了放弃。所有为计划建造的建筑开始崩塌，被上传的意识被释放回躯体（可能会带有后遗症）。世界恢复了原样，充满了不完美、痛苦和可能性。玩家将获得一条最终信息：“谢谢你……让我们还能继续当‘人’。” 游戏继续，但玩家将永远带着这个选择的重量。

* **设计主旨**: 这不再是关于一个人的救赎，而是关于对“救赎”本身的质疑。它将玩家的神权推向了顶峰，又用最根本的人性问题将其打落凡间。它迫使玩家定义：作为神，你最终的责任，是消除所有痛苦，还是守护那个充满痛苦的、名为“希望”的可能性？这已经超越了“私货”的范畴，是对游戏叙事边界的一次终极探索。